removeStrategy:
  rbac: SYNC
  items: NONE
items:
  - concurrentBuild: true
    kind: pipeline
    displayName: GolangAppExample
    resumeBlocked: false
    name: GolangAppExample
    description: ''
    definition:
      cpsScmFlowDefinition:
        scriptPath: pipelines/Jenkinsfile-golang.groovy
        scm:
          gitSCM:
            userRemoteConfigs:
              - userRemoteConfig:
                  credentialsId: github-user-ssh
                  url: git@github.com:cccaternberg/cloudbees-ci-config.git
            branches:
              - branchSpec:
                  name: '*/main'
        lightweight: false
    disabled: false
  - healthMetrics:
      - worstChildHealthMetric:
          recursive: true
      - averageChildHealthMetric: {}
      - jobStatusHealthMetric:
          unstable: true
          countVirginJobs: false
          failure: true
          success: true
          unbuilt: true
      - primaryBranchHealthMetric: {}
    kind: folder
    displayName: ops
    name: ops
    description: ''
    items:
      - concurrentBuild: true
        kind: pipeline
        displayName: BuildContainer
        resumeBlocked: false
        name: BuildContainer
        description: ''
        definition:
          cpsScmFlowDefinition:
            scriptPath: resources/pipelines/Jenkinsfile-docker-build.groovy
            scm:
              gitSCM:
                userRemoteConfigs:
                  - userRemoteConfig:
                      credentialsId: bbssh
                      url: git@bitbucket.org:acaternberg/shared_libs.git
                branches:
                  - branchSpec:
                      name: '*/main'
            lightweight: false
        disabled: false
        properties:
          - pipelineTriggers:
              triggers:
                - bitbucketPush:
                    overrideUrl: ''
          - parameters:
              parameterDefinitionNames:
                - DOCKER_DIR
                - REGISTRY_REPOSITORY_IMAGE
              parameterDefinitions:
                - choice:
                    name: DOCKER_DIR
                    description: shared_libs/resources/docker/$DOCKER_DIR/Dockerfile
                    choices:
                      - k8s
                      - golang-ci
                - choice:
                    name: REGISTRY_REPOSITORY_IMAGE
                    description: |-
                      Where to push the docker image
                      kaniko executor .....--destination ${params.REGISTRY_REPOSITORY_IMAGE}:BUILD_NUMBER-${BUILD_NUMBER}
                    choices:
                      - caternberg/jenkins-agent-k8s
                      - caternberg/golang-customized
      - concurrentBuild: true
        kind: pipeline
        displayName: SonarqubeTest
        resumeBlocked: false
        name: SonarqubeTest
        description: ''
        definition:
          cpsScmFlowDefinition:
            scriptPath: resources/pipelines/Jenkinsfile-SonarQubeTest.groovy
            scm:
              gitSCM:
                userRemoteConfigs:
                  - userRemoteConfig:
                      credentialsId: bbssh
                      url: git@bitbucket.org:acaternberg/shared_libs.git
                branches:
                  - branchSpec:
                      name: '*/main'
            lightweight: true
        disabled: false
    properties:
      - envVars: {}
      - folderLibraries:
          libraries:
            - libraryConfiguration:
                implicit: false
                allowVersionOverride: true
                retriever:
                  modernSCM:
                    scm:
                      git:
                        traits:
                          - gitBranchDiscovery: {}
                        credentialsId: bbssh
                        id: ba0ad626-8f56-47d1-aaeb-1eb5287ef964
                        remote: git@bitbucket.org:acaternberg/shared_libs.git
                name: bitbucket.org-acaternberg-shared_libs
                defaultVersion: main
                includeInChangesets: true
      - kubernetesFolderProperty: {}
      - itemRestrictions:
          filter: false